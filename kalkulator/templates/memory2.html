
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Gra Memory</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    #board {
      display: flex;
      flex-wrap: wrap;
      width: 1000px;
      margin: 20px auto;
    }

    .card {
      width: 200px;
      height: 200px;
      border: 2px solid black;
      margin: 10px;
      cursor: pointer;
    }

    .flipped {
      border-color: green;
    }

    #message {
      text-align: center;
      font-size: 24px;
      margin-bottom: 20px;
    }

    #button {
      display: none;
      margin: 0 auto;
      font-size: 20px;
      padding: 10px 20px;
    }
  </style>
</head>
<body>
  <div id="message">Znajdź wszystkie pary!</div>
  <div id="board"></div>
  <button id="button">Zagraj ponownie</button>
  <script>
var cards = [
{name: "0", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSsfVnVysDJDPC4Kc_thF5zvjPlKF_Ef4J-ug&usqp=CAU"},
    {name: "1", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTTPJT_CWPsz3CD9fQouURrYoM6PllTuA_ZHKGOvw-catyVrKXEHHTbMXTf62PFvVEcTSI&usqp=CAU"},
    {name: "2", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSDMNqZs--gL4sfMKZmN_8YQ4dIt1AsTFIgRg&usqp=CAU"},
    {name: "3", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRgNrkxtFobsT_Wek7ySGUhAHpsqC3CUrDCTg&usqp=CAU"},

];
cards = cards.concat(cards);
cards = shuffle(cards);

var firstCard = null;
var secondCard = null;
var matches = 0;
var attempts = 0;
var score = 0;

var board = document.getElementById("board");
var message = document.getElementById("message");
var button = document.getElementById("button");

for (var i = 0; i < cards.length; i++) {
  var card = document.createElement("div");
  card.className = "card";
  card.dataset.name = cards[i].name;
  card.style.backgroundImage = "url('back.png')";
  card.addEventListener("click", flipCard);
  board.appendChild(card);
}

function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  while (0 !== currentIndex) {

    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

function flipCard() {
  if (firstCard && secondCard) return;

  if (this === firstCard) return;

  this.classList.add("flipped");
  this.style.backgroundImage = "url('" + cards[this.dataset.name].image + "')";

  if (!firstCard) {
    firstCard = this;
  } else {
    secondCard = this;

    attempts++;

    if (firstCard.dataset.name === secondCard.dataset.name) {

      matches++;

      message.textContent = "Znalazłeś parę! Masz teraz " + matches + " par.";

      firstCard.removeEventListener("click", flipCard);
      secondCard.removeEventListener("click", flipCard);

      firstCard = null;
      secondCard = null;

      if (matches === cards.length / 2) {

        score = Math.floor(1000 / attempts);

        message.textContent = "Gratulacje! Ukończyłeś grę w " + attempts + " próbach. Twój wynik to " + score + ".";

        button.style.display = "block";
        button.addEventListener("click", restartGame);
      }
    } else {

      message.textContent = "Nie pasują. Spróbuj ponownie.";

      setTimeout(function() {
        firstCard.classList.remove("flipped");
        secondCard.classList.remove("flipped");
        firstCard.style.backgroundImage = "url('back.png')";
        secondCard.style.backgroundImage = "url('back.png')";
        firstCard = null;
        secondCard = null;
      }, 1000);
    }
  }
}

function restartGame() {
  location.reload();
}
  </script>
</body>
</html>